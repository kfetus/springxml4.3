<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
 
<mapper namespace="base.board.BoardMapper">

   <select id="selectBoardList" parameterType="java.util.HashMap" resultType="java.util.HashMap">
		SELECT /* BoardMapper.selectBoardList 게시판 조회 */
				SEQ
				, CATEGORY
				, TITLE
				, BODY_TEXT
				, ORIGIN_BOARD_SEQ
				, ORDER_NUM
				, REG_ID
				, REG_DT
				, CNG_DT
		  FROM MAIN_BOARD
		<where>
			<if test="seq != null and seq != '' ">AND SEQ = #{seq}</if>
			<if test="title != null and title != '' ">AND TITLE LIKE #{title}</if>
		</where>
		ORDER BY SEQ
    </select>

	<select id="selectBoardOne" parameterType="String" resultType="java.util.HashMap">
		SELECT /* BoardMapper.selectBoardView 게시판 상세 조회 */
				SEQ
				, CATEGORY
				, TITLE
				, BODY_TEXT
				, ORIGIN_BOARD_SEQ
				, ORDER_NUM
				, REG_ID
				, DATE_FORMAT(REG_DT, '%Y-%m-%d') REG_DT
				, CNG_DT
		  FROM MAIN_BOARD
		 WHERE SEQ = #{seq}
	</select>
    
	<insert id="insertBoardOne" parameterType="java.util.HashMap">
		INSERT /* BoardMapper.selectBoardList 게시판 조회 */
		INTO MAIN_BOARD(
			SEQ
			, CATEGORY
			, TITLE
			, BODY_TEXT
			, ORIGIN_BOARD_SEQ
			, ORDER_NUM
			, REG_ID
			, REG_DT
			, CNG_DT
			)
		VALUES(
			nextval(BOARD_SEQ)
			, #{category}
			, #{title}
			, #{bodyText}
			, #{originBoardSeq}
			, #{orderNum}
			, #{regId}
			, CURRENT_TIMESTAMP()
			, CURRENT_TIMESTAMP()
			)
	</insert>    

	<update id="updateBoardOne">
		UPDATE MAIN_BOARD
		SET    CATEGORY  = #{category},
		       TITLE     = #{title},
		       BODY_TEXT = #{bodyText},
		       CNG_DT    = SYSDATE
		WHERE SEQ = #{seq}
	</update>
	
	<delete id="deleteBoardOne">
		DELETE FROM MAIN_BOARD
		WHERE  SEQ = #{seq}
	</delete>	
</mapper>